{"ast":null,"code":"import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App.js';\nclass MIDIAccess {\n  constructor() {\n    this.onMIDIMessage = event => {\n      let message = `MIDI message received at timestamp ${event.timeStamp}[${event.data.length} bytes]: `;\n      for (const character of event.data) {\n        message += `0x${character.toString(16)}`;\n      }\n      console.log(message);\n    };\n    navigator.requestMIDIAccess().then(this.onMIDISuccess.bind(this), this.onMIDIFailure.bind(this));\n    this.midi = null;\n    this.currentNotes = [];\n  }\n  onMIDISuccess(midiAccess) {\n    console.log(\"WebMIDI is supported in browser.\");\n    console.log(midiAccess);\n    midiAccess.onstatechange = this.updateDevices; // idk if i need this yet\n    midiAccess.addEventListener('statechange', this.updateDevices);\n    this.midi = midiAccess;\n    var midiIns = midiAccess.inputs;\n    var midiOuts = midiAccess.outputs;\n    const inputs = midiIns.values();\n    const outputs = midiOuts.values();\n    let keyboard = null;\n\n    // list midi inputs to console\n    if (inputs != null) {\n      for (let input of inputs) {\n        console.log(`Found MIDI input: ${input.name}, ID: ${input.id}`);\n        if (input.name === \"V49\") {\n          keyboard = input;\n        }\n        //input.onMIDIMessage = this.onMIDIMessage.bind(this);\n      }\n    } else {\n      console.log(\"Please connect MIDI device.\");\n    }\n\n    // list midi outputs to console\n    if (outputs != null) {\n      for (let output of outputs) {\n        console.log(`Found MIDI output: ${output.name}, ID: ${output.id}`);\n      }\n    }\n    if (keyboard != null) {\n      this.useKeyboard(keyboard);\n    }\n  }\n  updateDevices(e) {\n    console.log(e);\n  }\n  onMIDIFailure() {\n    console.log(\"Midi failure.\");\n  }\n  // NOTES: 0-127\n  useKeyboard(keyboard) {\n    keyboard.onmidimessage = function (event) {\n      var noteNumber = event.data[1];\n      if (event.data[0] === 144)\n        // command is note on\n        {\n          //this.currentNotes.push(noteNumber); // add note to array\n          console.log('Note number: ' + noteNumber);\n        } else if (event.data[0] === 128) {\n        //const index = this.currentNotes.indexOf(noteNumber);\n        console.log(\"Note off.\");\n\n        /*if (index != -1) // remove from array\r\n        {\r\n            this.currentNotes.splice(index, 1);\r\n        }*/\n      }\n    };\n  }\n}\n\nexport default MIDIAccess;","map":{"version":3,"names":["React","ReactDOM","App","MIDIAccess","constructor","onMIDIMessage","event","message","timeStamp","data","length","character","toString","console","log","navigator","requestMIDIAccess","then","onMIDISuccess","bind","onMIDIFailure","midi","currentNotes","midiAccess","onstatechange","updateDevices","addEventListener","midiIns","inputs","midiOuts","outputs","values","keyboard","input","name","id","output","useKeyboard","e","onmidimessage","noteNumber"],"sources":["C:/Users/astri/OneDrive - Grand Canyon University/Capstone/Capstone/src/MIDIAccess.js"],"sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport App from './App.js';\r\n\r\nclass MIDIAccess\r\n{\r\n    constructor()\r\n    {\r\n        navigator.requestMIDIAccess()\r\n            .then(this.onMIDISuccess.bind(this), this.onMIDIFailure.bind(this));\r\n        this.midi = null;\r\n        this.currentNotes = [];\r\n    }\r\n\r\n    onMIDISuccess(midiAccess)\r\n    {\r\n        console.log(\"WebMIDI is supported in browser.\");\r\n        console.log(midiAccess);\r\n        midiAccess.onstatechange = this.updateDevices; // idk if i need this yet\r\n        midiAccess.addEventListener('statechange', this.updateDevices);\r\n        this.midi = midiAccess;\r\n\r\n        var midiIns = midiAccess.inputs;\r\n        var midiOuts = midiAccess.outputs;\r\n\r\n        const inputs = midiIns.values();\r\n        const outputs = midiOuts.values();\r\n\r\n        let keyboard = null;\r\n\r\n        // list midi inputs to console\r\n        if (inputs != null)\r\n        {\r\n            for(let input of inputs)\r\n            {\r\n                console.log(`Found MIDI input: ${input.name}, ID: ${input.id}`);\r\n                if(input.name === \"V49\")\r\n                {\r\n                    keyboard = input;\r\n                }\r\n                //input.onMIDIMessage = this.onMIDIMessage.bind(this);\r\n            }\r\n        }\r\n        else\r\n        {\r\n            console.log(\"Please connect MIDI device.\");\r\n        }\r\n\r\n        // list midi outputs to console\r\n        if(outputs != null)\r\n        {\r\n            for(let output of outputs)\r\n            {\r\n                console.log(`Found MIDI output: ${output.name}, ID: ${output.id}`);\r\n            }\r\n        }\r\n\r\n        if(keyboard != null)\r\n        {\r\n            this.useKeyboard(keyboard);\r\n        }\r\n        \r\n    }\r\n\r\n    updateDevices(e)\r\n    {\r\n        console.log(e);\r\n    }\r\n\r\n    onMIDIFailure ()\r\n    {\r\n        console.log(\"Midi failure.\");\r\n    }\r\n\r\n    onMIDIMessage = (event) =>\r\n    {\r\n        let message = `MIDI message received at timestamp ${event.timeStamp}[${event.data.length} bytes]: `;\r\n\r\n        for(const character of event.data)\r\n        {\r\n            message += `0x${character.toString(16)}`;\r\n        }\r\n\r\n        console.log(message);\r\n    }\r\n\r\n    // NOTES: 0-127\r\n    useKeyboard(keyboard)\r\n    {\r\n        keyboard.onmidimessage = function (event)\r\n        {\r\n            var noteNumber = event.data[1];\r\n\r\n            if(event.data[0] === 144) // command is note on\r\n            {\r\n                //this.currentNotes.push(noteNumber); // add note to array\r\n                console.log('Note number: ' + noteNumber);\r\n            }\r\n            else if (event.data[0] === 128)\r\n            {\r\n                //const index = this.currentNotes.indexOf(noteNumber);\r\n                console.log(\"Note off.\");\r\n\r\n                /*if (index != -1) // remove from array\r\n                {\r\n                    this.currentNotes.splice(index, 1);\r\n                }*/\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\nexport default MIDIAccess;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}